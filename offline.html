<!doctype html>
<html lang="no">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="Nettside for logging av trening." />
        <meta name="treningheten" content="index, follow" />

        <title>Treningheten</title>

        <!-- Favicon generator https://www.favicon-generator.org/ -->
        <link rel="apple-touch-icon" sizes="57x57" href="/assets/favicons/apple-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="/assets/favicons/apple-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/assets/favicons/apple-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/assets/favicons/apple-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/assets/favicons/apple-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/assets/favicons/apple-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/assets/favicons/apple-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/assets/favicons/apple-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-icon-180x180.png">
        <link rel="icon" type="image/png" sizes="192x192"  href="/assets/favicons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="96x96" href="/assets/favicons/favicon-96x96.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png">
        <link rel="manifest" href="/manifest.json">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="msapplication-TileImage" content="/assets/favicons/ms-icon-144x144.png">
        <meta name="theme-color" content="#ffffff">
        <meta name="msapplication-config" content="browserconfig.xml" />
        
        <!-- Bootstrap 4 CSS and custom CSS -->
        <link rel="stylesheet" type="text/css" href="css/trening.css" />
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    </head>
<body>

<!-- navbar -->
<div id="nav">
    <nav class="navbar" id="navbar">
        <div class="nav-logo" id="nav-logo">
            <a href="#" onclick="location.reload();"><img src="assets/logo/logo_white.svg" style="box-sizing: border-box; height: 4em;padding: 0.5em; margin: auto;"></img></a>
        </div>

        <a class="nav-title" id="nav-title" href="#" onclick="location.reload();" id='home'>
            <b>Treningheten</b>
        </a>
    
        <a class="nav-icon" href="javascript:void(0);" class="icon" onclick="toggle_navbar()" style="padding: 0;">
            <img src="assets/menu.svg" style="box-sizing: border-box;height: 4em;padding: 1em;margin: auto;"></img>
        </a>
        
        <a class="nav-item enabled" href="#" onclick='load_page_login();' id='log_in_tab'>Logg inn</a>
        <a class="nav-item disabled" href="#" onclick='alert("Under konstruksjon :)");' id='news_tab'>Nyheter</a>
        <a class="nav-item disabled" href="#" onclick='load_page_user();' id='update_account'>Bruker</a>
        <a class="nav-item enabled" href="#" onclick='load_page_register();' id='register_tab'>Registrer deg</a>
        <a class="nav-item disabled" href="#" onclick="log_out()" id='log_out_tab'>Logg ut</a>
    
    </nav>
</div>
<!-- /navbar -->

<!-- container -->
<main role="main" class="content" id="content">

    <!-- where fireworks will appear -->
    <div class="pyro" id="pyro">
        <div class="before"></div>
        <div class="after"></div>
    </div>

    <!-- where loading screen will appear -->
    <div id="loading_screen" style="position: fixed;
                                    display: block;
                                    width: 100%;
                                    height: 100%;
                                    top: 0;
                                    left: 0;
                                    text-align: center;
                                    background-color: #fff;
                                    z-index: 99;
                                    margin-top: 4em;">
        <div style="margin: 5em auto;
                    display: flex;
                    flex-direction: column;
                    flex-wrap: nowrap;
                    align-content: center;
                    justify-content: center;
                    align-items: center;">
            <img src="assets/barbell.gif" style="height: 40%;
                                                padding: 1em;
                                                background-color: var(--white);
                                                border-radius: 0.5em;">
            <h1 id="loading_screen_text">Laster inn...</h1>
        </div>
    </div>

    <!-- where notifications will appear -->
    <div id="response"></div>

    <!-- where the current goal will appear -->
    <div id="goal_div" class="goal_div">
    </div>

    <!-- where main content will appear -->
    <div id="content-box">
    </div>

</main>
<!-- /container -->

<!-- JS script -->
<script>
    var cookie;
    var logged_in = false;

    var login_data;
    var weeK_leave = false;
    var exercise_this_week = 0;
    var exer_goal = 0;
    var stop_url_react = false;

    var login_load = false;

    $(document).ready(function(){

        $.when(

            $.Deferred(function( deferred ){
                $( deferred.resolve );
            })

        ).done(function(){

            document.getElementById('loading_screen_text').innerHTML = 'Kan det hende du er offline?';

            // <!-- Inline the page's JavaScript file. -->
            // Listen to changes in the network state, reload when online.
            // This handles the case when the device is completely offline.
            window.addEventListener('online', () => {
                window.location.reload();
            });

            // Check if the server is responding and reload the page if it is.
            // This handles the case when the device is online, but the server
            // is offline or misbehaving.
            async function checkNetworkAndReload() {
                try {
                const response = await fetch('./index.html');
                // Verify we get a valid response from the server
                if (response.status >= 200 && response.status < 500) {
                    window.location.href = "./";
                    return;
                }
                } catch {
                // Unable to connect to the server, ignore.
                }
                window.setTimeout(checkNetworkAndReload, 2500);
            }

            checkNetworkAndReload();

        });
    });
</script>

<!-- If no JS -->
<noscript>
    <h3>Du trenger JavaScript på din nettleser for å bruke denne nettsiden. Skru det på eller bytt nettleser.</h3>
</noscript>

</body>
</html>
